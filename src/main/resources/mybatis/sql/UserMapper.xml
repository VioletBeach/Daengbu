<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.violetbeach.daengbu.repository.UserRepository">

	<select id="findAllUsers" resultType="com.violetbeach.daengbu.dto.UserDto">
        SELECT * FROM user;
    </select>

    <select id="findUserById" parameterType="int" resultType="com.violetbeach.daengbu.dto.UserDto">
        SELECT * FROM user WHERE id=#{id};
    </select>
    
    <insert id="signUp" parameterType="com.violetbeach.daengbu.dto.UserDto" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO user
        (
        	email, password, username, tel, location1, location2, register_datetime, register_ip, last_login_datetime, last_login_ip
        )
        VALUES
        (
        	#{email}, #{password}, #{username}, #{tel}, #{location1}, #{location2}, NOW(), '192.0.0.1', NOW(), '192.168.0.0.1'
        );
    </insert>

</mapper>